<?xml version="1.0" encoding="UTF-8"?>
<protocol name="wl_eom">

  <copyright>
    Copyright 2016 Samsung Electronics co., Ltd. All Rights Reserved.

    Permission to use, copy, modify, distribute, and sell this
    software and its documentation for any purpose is hereby granted
    without fee, provided that\n the above copyright notice appear in
    all copies and that both that copyright notice and this permission
    notice appear in supporting documentation, and that the name of
    the copyright holders not be used in advertising or publicity
    pertaining to distribution of the software without specific,
    written prior permission.  The copyright holders make no
    representations about the suitability of this software for any
    purpose.  It is provided "as is" without express or implied
    warranty.

    THE COPYRIGHT HOLDERS DISCLAIM ALL WARRANTIES WITH REGARD TO THIS
    SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
    FITNESS, IN NO EVENT SHALL THE COPYRIGHT HOLDERS BE LIABLE FOR ANY
    SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
    WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN
    AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION,
    ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF
    THIS SOFTWARE.
  </copyright>

  <interface name="wl_eom" version="1">
    <description summary="an interface for external outputs">
      An interface to get information of external outputs and to use external outputs.
    </description>

    <enum name="error">
      <entry name="none" value="0" summary="no error"/>
      <entry name="no_output" value="1" summary="Given output is invalid."/>
      <entry name="no_attribute" value="2" summary="Given attribute is invalid."/>
      <entry name="output_occupied" value="3" summary="The key has been grabbed already."/>
    </enum>

    <enum name="type">
      <description summary="connector type">
        Define several connectors type of the external outputs
      </description>
      <entry name="none" value="0" summary="none"/>
      <entry name="vga" value="1" summary="VGA output connector type"/>
      <entry name="dvii" value="2" summary="DVI-I output connector type"/>
      <entry name="dvid" value="3" summary="DVI-D output connector type"/>
      <entry name="dvia" value="4" summary="DVI-A output connector type"/>
      <entry name="composite" value="5" summary="Composite output connector type"/>
      <entry name="svideo" value="6" summary="S-Video output connector type"/>
      <entry name="lvds" value="7" summary="LVDS output connector type"/>
      <entry name="component" value="8" summary="Component output connector type"/>
      <entry name="9pindin" value="9" summary="9 pin DIN output connector type"/>
      <entry name="displayport" value="10" summary="DisplayPort output connector type"/>
      <entry name="hdmia" value="11" summary="HDMI type A output connector type"/>
      <entry name="hdmib" value="12" summary="HDMI type B output connector type"/>
      <entry name="tv" value="13" summary="TV output connector type"/>
      <entry name="edp" value="14" summary="eDP output connector type"/>
      <entry name="virtual" value="15" summary="Virtual output connector type"/>
      <entry name="dsi" value="16" summary="DSI output connector type"/>
    </enum>

    <enum name="status">
      <description summary="connection status of the external output">
        The status of external output is connected or not.
      </description>
      <entry name="none" value="0" summary="none"/>
      <entry name="connection" value="1" summary="output connected"/>
      <entry name="disconnection" value="2" summary="output disconnected"/>
    </enum>

    <enum name="mode">
      <description summary="mode of the external output">
        There are two modes for external output.
        Mirror mode is showing main display screen to external output.
        Presentation mode is showing app's specific buffer contents to external output.
      </description>
      <entry name="none" value="0" summary="none"/>
      <entry name="mirror" value="1" summary="mirror mode"/>
      <entry name="presentation" value="2" summary="presentation mode"/>
    </enum>

    <enum name="attribute">
      <description summary="attribute of the external output">
        Application can use external output by attribute.

        If application succeed to set attribute and set external output window,
        the external output's mode will be changed to Presentation mode.

        Attribute has priority.
        If attribute is set to normal, it can be changed by normal, exclusive_share, exclusive.
        If attribute is set to exclusive_share, it can be changed by exclusive_share, exclusive.
        If attribute is set to exclusive, it cannot be changed by other application.
        If application which set attribute is quit or set to none,
        the mode will be changed to Mirror if connected.
      </description>
      <entry name="none" value="0" summary="none"/>
      <entry name="normal" value="1" summary="nomal attribute"/>
      <entry name="exclusive_share" value="2" summary="exclusive share attribute"/>
      <entry name="exclusive" value="3" summary="exclusive attribute"/>
    </enum>

    <enum name="attribute_state">
      <description summary="state of the external output attribute">
        It means the state of attribute.
        The applicatoin which set attribute successful can get state.

        Active means the external window is set to external output succefully.
        So application can use that window.
        Inactive means cannot use external output, because of dissconnecting or some other reasons.
        But if connected again, the application can use external output.
        Lost means the application is lost it's right to external output by other application's attribute set.
      </description>
      <entry name="none" value="0" summary="none"/>
      <entry name="active" value="1" summary="attribute is active on the output"/>
      <entry name="inactive" value="2" summary="attribute is inactive on the output"/>
      <entry name="lost" value="3" summary="the connection of output is lost"/>
    </enum>

    <request name="set_attribute">
      <description summary="api to set attribute to specific external output">
        Application can have right to external output by set_attribute.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="attribute" type="uint"/>
    </request>

    <request name="set_xdg_window">
      <description summary="set xdg surface to external window">
        Use xdg_shell_surface to external output.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="surface" type="object" interface="xdg_surface" allow-null="false"/>
    </request>

    <request name="set_shell_window">
      <description summary="">
        Use shell_surface to external output.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="surface" type="object" interface="wl_shell_surface" allow-null="false"/>
    </request>

    <request name="get_output_info">
      <description summary="get information of external output">
        Request to server to send information of specific external output to client by output id.
      </description>
      <arg name="output_id" type="uint"/>
    </request>

    <event name="output_count">
      <description summary="external output count">
        Get the number of external output devices that are supported by this device.
      </description>
      <arg name="count" type="uint"/>
    </event>

    <event name="output_info">
      <description summary="">
        Send information of specific external output to client.

        Output_id is numbering of external outputs. It is fixed when booting time.
        The type, mode attribute, attribute_state is mentioned above.
        The w and h is the resolution of external output.
        The w_mm and h_mm is the physical size of external output. The unit is mm.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="type" type="uint"/>
      <arg name="mode" type="uint"/>
      <arg name="w" type="uint"/>
      <arg name="h" type="uint"/>
      <arg name="w_mm" type="uint"/>
      <arg name="h_mm" type="uint"/>
      <arg name="connection" type="uint"/>
      <arg name="skip" type="uint"/>
      <arg name="attribute" type="uint"/>
      <arg name="attribute_state" type="uint"/>
      <arg name="error" type="uint"/>
    </event>

    <event name="output_type">
      <description summary="output type and connection info">
        Send information of output type and connection.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="type" type="uint"/>
      <arg name="status" type="uint"/>
    </event>

    <event name="output_mode">
      <description summary="output mode info">
        Send information of output mode.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="mode" type="uint"/>
    </event>

    <event name="output_attribute">
      <description summary="output attribute info">
        Send information of output attribute and attribute state.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="attribute" type="uint"/>
      <arg name="attribute_state" type="uint"/>
      <arg name="error" type="uint"/>
    </event>

    <event name="output_set_window">
      <description summary="reslut of set_window">
        Send the result of set_window to client.
      </description>
      <arg name="output_id" type="uint"/>
      <arg name="error" type="uint"/>
    </event>

  </interface>

</protocol>
